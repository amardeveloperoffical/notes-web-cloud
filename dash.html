<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notes Maker</title>
     <link rel="icon" type="image/x-icon" href="favicon.png">
     <meta name="author" content="Amar developer">
    <meta name="google-adsense-account" content="ca-pub-8046361985507764">
    <meta name="google-site-verification" content="fjU_xCMW-9rwsNqi1y760-hPXIQe1wPjPgT3pfnGvNs" />
    <meta name="description" content="Create, organize, and manage your notes effortlessly with Notes Maker – a fast, secure, and user-friendly web app for personal and professional productivity. Accessible from any device, anytime.">
    <meta name="keywords" content="notes app, online notes maker, free note taking, digital notebook, productivity tool, create notes online, manage notes, web-based note app, personal organizer, task management">
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8046361985507764"
     crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .note-card {
            transition: all 0.3s ease;
            transform-origin: center;
        }
        .note-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .gradient-bg {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        #body {
            
        }
        /* From Uiverse.io by Allyhere */ 
.btn-donate {
  --clr-font-main: hsla(0 0% 20% / 100);
  --btn-bg-1: hsla(194 100% 69% / 1);
  --btn-bg-2: hsla(217 100% 56% / 1);
  --btn-bg-color: hsla(360 100% 100% / 1);
  --radii: 0.5em;
  cursor: pointer;
  padding: 0.4em 0.6em;
min-width: 60px;
  min-height: 20px;
  
  font-size: var(--size, 1rem);
  font-weight: 500;
  transition: 0.8s;
  background-size: 280% auto;
  background-image: linear-gradient(
    325deg,
    var(--btn-bg-2) 0%,
    var(--btn-bg-1) 55%,
    var(--btn-bg-2) 90%
  );
  border: none;
  border-radius: var(--radii);
  color: var(--btn-bg-color);
  box-shadow:
    0px 0px 20px rgba(71, 184, 255, 0.5),
    0px 5px 5px -1px rgba(58, 125, 233, 0.25),
    inset 4px 4px 8px rgba(175, 230, 255, 0.5),
    inset -4px -4px 8px rgba(19, 95, 216, 0.35);
}

#generate-password-btn:hover {
  background-position: right top;
}

#generate-password-btn:is(:focus, :focus-visible, :active) {
  outline: none;
  box-shadow:
    0 0 0 3px var(--btn-bg-color),
    0 0 0 6px var(--btn-bg-2);
}

@media (prefers-reduced-motion: reduce) {
  #generate-password-btn {
    transition: linear;
  }
}
        
    </style>
</head>
<body class="min-h-screen gradient-bg font-sans" id="body">
    <div class="container mx-auto px-4 py-8">
        <header class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">Create Notes</h1>
            <p class="text-gray-600">Capture your thoughts beautifully</p>
        </header>
<div class="flex justify-center mb-[20px]">
  <button id="logout-btn" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition flex items-center justify-center">
      <strong>Logout</strong>
  </button>
</div>
        <div class="max-w-3xl mx-auto bg-white rounded-xl shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">Create New Note</h2>
            <div class="space-y-4">
                <div>
                    <label for="note-title" class="block text-sm font-medium text-gray-700 mb-1">Title</label>
                    <input type="text" id="note-title" placeholder="Note title..." 
                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition">
                </div>
                <div>
                    <label for="note-content" class="block text-sm font-medium text-gray-700 mb-1">Content</label>
                    <textarea id="note-content" rows="4" placeholder="Write your note here..." 
                              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"></textarea>
                </div>
                <div class="flex justify-between">
                    <button id="generate-password-btn" class="btn-donate">
                        <i class="fas fa-key mr-2"></i> Generate Password
                    </button>
                    <button id="create-note" class="px-9 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center">
                        <i class="fas fa-plus mr-2"></i> Create Note
                    </button>
                </div>
            </div>
        </div>

        <div id="notes-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Notes will be added here dynamically -->
        </div>

        <!-- Edit Note Modal -->
        <div id="edit-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
            <div class="bg-white rounded-xl shadow-xl p-6 w-full max-w-md">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-semibold text-gray-800">Edit Note</h3>
                    <button id="close-modal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="space-y-4">
                    <div>
                        <label for="edit-title" class="block text-sm font-medium text-gray-700 mb-1">Title</label>
                        <input type="text" id="edit-title" 
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition">
                    </div>
                    <div>
                        <label for="edit-content" class="block text-sm font-medium text-gray-700 mb-1">Content</label>
                        <textarea id="edit-content" rows="4" 
                                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"></textarea>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button id="cancel-edit" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition">
                            Cancel
                        </button>
                        <button id="save-edit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                            Save Changes
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Share Modal -->
        <div id="share-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
            <div class="bg-white rounded-xl shadow-xl p-6 w-full max-w-md">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-semibold text-gray-800">Share Note</h3>
                    <button id="close-share-modal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <button id="share-whatsapp" class="flex items-center justify-center px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition">
                            <i class="fab fa-whatsapp mr-2"></i> WhatsApp
                        </button>
                        <button id="share-facebook" class="flex items-center justify-center px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                            <i class="fab fa-facebook-f mr-2"></i> Facebook
                        </button>
                        <button id="share-twitter" class="flex items-center justify-center px-4 py-3 bg-blue-400 text-white rounded-lg hover:bg-blue-500 transition">
                            <i class="fab fa-twitter mr-2"></i> Twitter
                        </button>
                        <button id="share-telegram" class="flex items-center justify-center px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition">
                            <i class="fab fa-telegram mr-2"></i> Telegram
                        </button>
                        <button id="share-email" class="flex items-center justify-center px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition">
                            <i class="fas fa-envelope mr-2"></i> Email
                        </button>
                        <button id="copy-note" class="flex items-center justify-center px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition">
                            <i class="fas fa-copy mr-2"></i> Copy
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Password Generator Modal -->
        <div id="password-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
            <div class="bg-white rounded-xl shadow-xl p-6 w-full max-w-md">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-semibold text-gray-800">Password Generator</h3>
                    <button id="close-password-modal" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="space-y-4">
                    <div>
                        <label for="app-name" class="block text-sm font-medium text-gray-700 mb-1">App/Name</label>
                        <input type="text" id="app-name" placeholder="Enter app or website name" 
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition">
                    </div>
                    <div>
                        <label for="username" class="block text-sm font-medium text-gray-700 mb-1">Username</label>
                        <input type="text" id="username" placeholder="Enter username" 
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition">
                    </div>
                    <div>
                        <label for="generated-password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                        <div class="flex space-x-2">
                            <input type="text" id="generated-password" placeholder="Generated password will appear here" 
                                   class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition" readonly>
                            <button id="generate-password" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                    </div>
                    <div class="flex justify-end space-x-3">
                        <button id="cancel-password" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition">
                            Cancel
                        </button>
                        <button id="save-password" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                            Save as Note
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div id="delete-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
            <div class="bg-white rounded-2xl shadow-xl w-full max-w-sm mx-4 p-6 transform transition-all">
                <div class="text-center">
                    <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4">
                        <i class="fas fa-exclamation-triangle text-2xl text-red-600"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">Delete Note?</h3>
                    <p class="text-gray-600 mb-6">Are you sure you want to delete this note? This action cannot be undone.</p>
                    
                    <div class="flex space-x-3">
                        <button id="cancel-delete" class="flex-1 bg-gray-200 text-gray-800 rounded-lg px-6 py-3 font-medium hover:bg-gray-300 transition duration-150">
                            <i class="fas fa-times mr-2"></i>
                            Cancel
                        </button>
                        <button id="confirm-delete" class="flex-1 bg-red-600 text-white rounded-lg px-6 py-3 font-medium hover:bg-red-700 transition duration-150 shadow-md">
                            <i class="fas fa-trash-alt mr-2"></i>
                            Delete
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Success Alert Modal -->
        <div id="success-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
            <div class="bg-white rounded-2xl shadow-xl w-full max-w-sm mx-4 p-6 transform transition-all">
                <div class="text-center">
                    <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4">
                        <i class="fas fa-check text-2xl text-green-600"></i>
                    </div>
                    <h3 id="success-title" class="text-xl font-semibold text-gray-800 mb-2">Success!</h3>
                    <p id="success-message" class="text-gray-600 mb-6">Password saved as note successfully!</p>
                    
                    <button id="success-close" class="w-full bg-green-600 text-white rounded-lg px-6 py-3 font-medium hover:bg-green-700 transition duration-150 shadow-md">
                        <i class="fas fa-thumbs-up mr-2"></i>
                        Great!
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { auth, db } from './firebase.js';
        import { collection, addDoc, getDocs, deleteDoc, doc, updateDoc, query, where } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
        import { signOut } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        
        document.addEventListener('DOMContentLoaded', async function() {
            // DOM Elements
            const noteTitleInput = document.getElementById('note-title');
            const noteContentInput = document.getElementById('note-content');
            const createNoteBtn = document.getElementById('create-note');
            const notesContainer = document.getElementById('notes-container');
            const editModal = document.getElementById('edit-modal');
            const editTitleInput = document.getElementById('edit-title');
            const editContentInput = document.getElementById('edit-content');
            const saveEditBtn = document.getElementById('save-edit');
            const closeModalBtn = document.getElementById('close-modal');
            const cancelEditBtn = document.getElementById('cancel-edit');
            const logoutBtn = document.getElementById('logout-btn');
            const generatePasswordBtn = document.getElementById('generate-password-btn');
            const passwordModal = document.getElementById('password-modal');
            const closePasswordModalBtn = document.getElementById('close-password-modal');
            const cancelPasswordBtn = document.getElementById('cancel-password');
            const generatePasswordBtnModal = document.getElementById('generate-password');
            const savePasswordBtn = document.getElementById('save-password');
            const shareModal = document.getElementById('share-modal');
            const closeShareModalBtn = document.getElementById('close-share-modal');

            // State
            let notes = [];
            let userId = null;
            let currentShareNote = null;

            // Check authentication state
            auth.onAuthStateChanged(async (user) => {
                if (user) {
                    userId = user.uid;
                    await loadNotes();
                } else {
                    window.location.href = '/auth.html';
                }
            });

            // Load notes from Firestore
            async function loadNotes() {
                const q = query(collection(db, "notes"), where("userId", "==", userId));
                const querySnapshot = await getDocs(q);
                notes = querySnapshot.docs.map(doc => ({
                    id: doc.id,
                    ...doc.data()
                }));
                renderNotes();
            }
            let currentEditId = null;

            // Colors for note cards
            const noteColors = [
                'bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200',
                'bg-gradient-to-br from-green-50 to-green-100 border-green-200',
                'bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200',
                'bg-gradient-to-br from-pink-50 to-pink-100 border-pink-200',
                'bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200',
                'bg-gradient-to-br from-indigo-50 to-indigo-100 border-indigo-200'
            ];

            // Initialize the app
            function init() {
                renderNotes();
                setupEventListeners();
            }

            // Set up event listeners
            function setupEventListeners() {
                createNoteBtn.addEventListener('click', createNote);
                closeModalBtn.addEventListener('click', closeEditModal);
                cancelEditBtn.addEventListener('click', closeEditModal);
                saveEditBtn.addEventListener('click', saveEditedNote);
                logoutBtn.addEventListener('click', handleLogout);
                generatePasswordBtn.addEventListener('click', openPasswordGenerator);
                closePasswordModalBtn.addEventListener('click', closePasswordModal);
                cancelPasswordBtn.addEventListener('click', closePasswordModal);
                generatePasswordBtnModal.addEventListener('click', generateRandomPassword);
                savePasswordBtn.addEventListener('click', savePasswordAsNote);
                closeShareModalBtn.addEventListener('click', closeShareModal);
                
                // Delete modal event listeners
                document.getElementById('confirm-delete').addEventListener('click', confirmDeleteNote);
                document.getElementById('cancel-delete').addEventListener('click', cancelDeleteNote);
                
                // Allow creating note with Enter key in content field
                noteContentInput.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' && (e.ctrlKey || e.metaKey)) {
                        createNote();
                    }
                });
            }

            // Handle logout
            async function handleLogout() {
                try {
                    await signOut(auth);
                    window.location.href = '/auth.html';
                } catch (error) {
                    console.error('Error signing out:', error);
                    alert('Error signing out: ' + error.message);
                }
            }

            // Create a new note
            function createNote() {
                const title = noteTitleInput.value.trim();
                const content = noteContentInput.value.trim();
                
                if (!title && !content) {
                    alert('Please enter at least a title or content for your note.');
                    return;
                }
                
                const newNote = {
                    id: Date.now().toString(),
                    title: title || 'Untitled Note',
                    content: content || '',
                    createdAt: new Date().toISOString(),
                    color: noteColors[Math.floor(Math.random() * noteColors.length)]
                };
                
                notes.unshift(newNote);
                saveNotes();
                renderNotes();
                
                // Clear inputs
                noteTitleInput.value = '';
                noteContentInput.value = '';
                noteTitleInput.focus();
                
                // Show animation for new note
                const firstNote = document.querySelector('.note-card');
                if (firstNote) {
                    firstNote.classList.add('fade-in');
                }
            }

            // Render all notes
            function renderNotes() {
                if (notes.length === 0) {
                    notesContainer.innerHTML = `
                        <div class="col-span-full text-center py-12">
                            <i class="fas fa-sticky-note text-4xl text-gray-300 mb-4"></i>
                            <p class="text-gray-500">No notes yet. Create your first note above!</p>
                        </div>
                    `;
                    return;
                }
                
                notesContainer.innerHTML = notes.map(note => `
                    <div class="note-card ${note.color} border rounded-xl shadow-sm overflow-hidden fade-in">
                        <div class="p-5">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="font-bold text-lg text-gray-800 truncate">${note.title}</h3>
                                <span class="text-xs text-gray-500 ml-2 whitespace-nowrap">
                                    ${new Date(note.createdAt).toLocaleDateString()}
                                </span>
                            </div>
                            <p class="text-gray-600 mb-4 whitespace-pre-line">${note.content || '<span class="text-gray-400 italic">No content</span>'}</p>
                        </div>
                        <div class="bg-white bg-opacity-70 px-4 py-3 flex justify-between items-center border-t">
                            <button data-id="${note.id}" class="share-btn px-3 py-1 text-sm text-green-600 hover:text-green-800 transition">
                                <i class="fas fa-share mr-1"></i> Share
                            </button>
                            <div class="flex space-x-2">
                                <button data-id="${note.id}" class="edit-btn px-3 py-1 text-sm text-blue-600 hover:text-blue-800 transition">
                                    <i class="fas fa-edit mr-1"></i> Edit
                                </button>
                                <button data-id="${note.id}" class="delete-btn px-3 py-1 text-sm text-red-600 hover:text-red-800 transition">
                                    <i class="fas fa-trash-alt mr-1"></i> Delete
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
                
                // Add event listeners to the new buttons
                document.querySelectorAll('.edit-btn').forEach(btn => {
                    btn.addEventListener('click', openEditModal);
                });
                
                document.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.addEventListener('click', deleteNote);
                });

                document.querySelectorAll('.share-btn').forEach(btn => {
                    btn.addEventListener('click', openShareModal);
                });
            }

            // Open edit modal
            function openEditModal(e) {
                const noteId = e.currentTarget.getAttribute('data-id');
                const note = notes.find(n => n.id === noteId);
                
                if (note) {
                    currentEditId = noteId;
                    editTitleInput.value = note.title;
                    editContentInput.value = note.content;
                    editModal.classList.remove('hidden');
                }
            }

            // Close edit modal
            function closeEditModal() {
                editModal.classList.add('hidden');
                currentEditId = null;
            }

            // Save edited note
            function saveEditedNote() {
                if (!currentEditId) return;
                
                const title = editTitleInput.value.trim();
                const content = editContentInput.value.trim();
                
                if (!title && !content) {
                    alert('Please enter at least a title or content for your note.');
                    return;
                }
                
                const noteIndex = notes.findIndex(n => n.id === currentEditId);
                
                if (noteIndex !== -1) {
                    notes[noteIndex].title = title || 'Untitled Note';
                    notes[noteIndex].content = content || '';
                    saveNotes();
                    renderNotes();
                    closeEditModal();
                }
            }

            // Delete a note
            let noteToDelete = null;
            
            function deleteNote(e) {
                noteToDelete = e.currentTarget.getAttribute('data-id');
                document.getElementById('delete-modal').classList.remove('hidden');
            }
            
            function confirmDeleteNote() {
                if (noteToDelete) {
                    deleteNoteFromFirestore(noteToDelete);
                    noteToDelete = null;
                    document.getElementById('delete-modal').classList.add('hidden');
                }
            }
            
            function cancelDeleteNote() {
                noteToDelete = null;
                document.getElementById('delete-modal').classList.add('hidden');
            }

            // Save note to Firestore
            async function createNote() {
                const title = noteTitleInput.value.trim();
                const content = noteContentInput.value.trim();
                
                if (!title && !content) {
                    alert('Please enter at least a title or content for your note.');
                    return;
                }
                
                const newNote = {
                    userId: userId,
                    title: title || 'Untitled Note',
                    content: content || '',
                    createdAt: new Date().toISOString(),
                    color: noteColors[Math.floor(Math.random() * noteColors.length)]
                };
                
                const docRef = await addDoc(collection(db, "notes"), newNote);
                newNote.id = docRef.id;
                notes.unshift(newNote);
                renderNotes();
                
                noteTitleInput.value = '';
                noteContentInput.value = '';
                noteTitleInput.focus();
            }

            async function deleteNoteFromFirestore(noteId) {
                try {
                    await deleteDoc(doc(db, "notes", noteId));
                    notes = notes.filter(note => note.id !== noteId);
                    renderNotes();
                    showSuccessModal('Note Deleted!', 'Your note has been successfully deleted.');
                } catch (error) {
                    console.error('Error deleting note:', error);
                    showSuccessModal('Delete Failed', 'Failed to delete note. Please try again.', 'error');
                }
            }

            async function saveEditedNote() {
                if (!currentEditId) return;
                
                const title = editTitleInput.value.trim();
                const content = editContentInput.value.trim();
                
                if (!title && !content) {
                    alert('Please enter at least a title or content for your note.');
                    return;
                }
                
                const noteRef = doc(db, "notes", currentEditId);
                await updateDoc(noteRef, {
                    title: title || 'Untitled Note',
                    content: content || ''
                });

                const noteIndex = notes.findIndex(n => n.id === currentEditId);
                if (noteIndex !== -1) {
                    notes[noteIndex].title = title || 'Untitled Note';
                    notes[noteIndex].content = content || '';
                    renderNotes();
                    closeEditModal();
                }
            }

            // Password Generator Functions
            function openPasswordGenerator() {
                passwordModal.classList.remove('hidden');
                generateRandomPassword(); // Generate initial password
            }

            function closePasswordModal() {
                passwordModal.classList.add('hidden');
                // Clear form
                document.getElementById('app-name').value = '';
                document.getElementById('username').value = '';
                document.getElementById('generated-password').value = '';
            }

            function generateRandomPassword() {
                const length = 12;
                const charset = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";
                let password = "";
                for (let i = 0; i < length; i++) {
                    password += charset.charAt(Math.floor(Math.random() * charset.length));
                }
                document.getElementById('generated-password').value = password;
            }

            async function savePasswordAsNote() {
                const appName = document.getElementById('app-name').value.trim();
                const username = document.getElementById('username').value.trim();
                const password = document.getElementById('generated-password').value.trim();

                if (!appName) {
                    showSuccessModal('Missing Information', 'Please enter an app/website name', 'warning');
                    return;
                }

                const title = `🔐 ${appName} - Password`;
                const content = `App/Website: ${appName}\nUsername: ${username || 'Not specified'}\nPassword: ${password}`;

                const newNote = {
                    userId: userId,
                    title: title,
                    content: content,
                    createdAt: new Date().toISOString(),
                    color: noteColors[Math.floor(Math.random() * noteColors.length)]
                };

                try {
                    const docRef = await addDoc(collection(db, "notes"), newNote);
                    newNote.id = docRef.id;
                    notes.unshift(newNote);
                    renderNotes();
                    closePasswordModal();
                    
                    // Copy password to clipboard
                    try {
                        await navigator.clipboard.writeText(password);
                        showSuccessModal('Password Saved!', 'Password saved as note successfully and copied to clipboard!');
                    } catch (clipboardError) {
                        showSuccessModal('Password Saved!', 'Password saved as note successfully!');
                    }
                } catch (error) {
                    console.error('Error saving password note:', error);
                    showSuccessModal('Error', 'Error saving password note: ' + error.message, 'error');
                }
            }

            // Share Functions
            function openShareModal(e) {
                const noteId = e.currentTarget.getAttribute('data-id');
                currentShareNote = notes.find(n => n.id === noteId);
                
                if (currentShareNote) {
                    shareModal.classList.remove('hidden');
                    setupShareButtons();
                }
            }

            function closeShareModal() {
                shareModal.classList.add('hidden');
                currentShareNote = null;
            }

            function setupShareButtons() {
                if (!currentShareNote) return;

                const shareText = `${currentShareNote.title}\n\n${currentShareNote.content}`;
                const encodedText = encodeURIComponent(shareText);

                document.getElementById('share-whatsapp').onclick = () => {
                    window.open(`https://wa.me/?text=${encodedText}`, '_blank');
                };

                document.getElementById('share-facebook').onclick = () => {
                    window.open(`https://www.facebook.com/sharer/sharer.php?u=${window.location.href}&quote=${encodedText}`, '_blank');
                };

                document.getElementById('share-twitter').onclick = () => {
                    window.open(`https://twitter.com/intent/tweet?text=${encodedText}`, '_blank');
                };

                document.getElementById('share-telegram').onclick = () => {
                    window.open(`https://t.me/share/url?url=${window.location.href}&text=${encodedText}`, '_blank');
                };

                document.getElementById('share-email').onclick = () => {
                    window.open(`mailto:?subject=${encodeURIComponent(currentShareNote.title)}&body=${encodedText}`, '_blank');
                };

                document.getElementById('copy-note').onclick = () => {
                    navigator.clipboard.writeText(shareText).then(() => {
                        closeShareModal();
                        showSuccessModal('Copied Successfully!', 'Note has been copied to your clipboard and is ready to paste anywhere!', 'success');
                    }).catch(err => {
                        console.error('Failed to copy: ', err);
                        closeShareModal();
                        showSuccessModal('Copy Failed', 'Failed to copy note to clipboard. Please try again or copy manually.', 'error');
                    });
                };
            }

            // Success Modal Functions
            function showSuccessModal(title, message, type = 'success') {
                const successModal = document.getElementById('success-modal');
                const successTitle = document.getElementById('success-title');
                const successMessage = document.getElementById('success-message');
                const iconContainer = successModal.querySelector('.mx-auto');
                const icon = iconContainer.querySelector('i');
                const closeButton = document.getElementById('success-close');

                successTitle.textContent = title;
                successMessage.textContent = message;

                // Update styling based on type
                if (type === 'success') {
                    iconContainer.className = 'mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4';
                    icon.className = 'fas fa-check text-2xl text-green-600';
                    closeButton.className = 'w-full bg-green-600 text-white rounded-lg px-6 py-3 font-medium hover:bg-green-700 transition duration-150 shadow-md';
                } else if (type === 'warning') {
                    iconContainer.className = 'mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-yellow-100 mb-4';
                    icon.className = 'fas fa-exclamation-triangle text-2xl text-yellow-600';
                    closeButton.className = 'w-full bg-yellow-600 text-white rounded-lg px-6 py-3 font-medium hover:bg-yellow-700 transition duration-150 shadow-md';
                } else if (type === 'error') {
                    iconContainer.className = 'mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4';
                    icon.className = 'fas fa-times text-2xl text-red-600';
                    closeButton.className = 'w-full bg-red-600 text-white rounded-lg px-6 py-3 font-medium hover:bg-red-700 transition duration-150 shadow-md';
                }

                successModal.classList.remove('hidden');

                // Auto close after 3 seconds for success messages
                if (type === 'success') {
                    setTimeout(() => {
                        successModal.classList.add('hidden');
                    }, 3000);
                }
            }

            function closeSuccessModal() {
                document.getElementById('success-modal').classList.add('hidden');
            }

            // Setup success modal close button
            document.getElementById('success-close').addEventListener('click', closeSuccessModal);

            // Initialize the app
            init();
        });
    </script>
    <p style="border-radius: 8px; text-align: center; font-size: 12px; color: #fff; margin-top: 16px;position: fixed; left: 8px; bottom: 8px; z-index: 10; background: rgba(0, 0, 0, 0.8); padding: 4px 8px;">Made with <span style="color: red;" >❤️</span> by Amar developer</p>
</body>
</html>
